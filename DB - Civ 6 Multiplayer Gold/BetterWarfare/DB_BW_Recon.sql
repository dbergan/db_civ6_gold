-- Recon

-- Description: stealth by default, fast moving, hard hitting, must be next to their target to attack, weak on defense
-- Gameplay: Because they are so fragile on defense, you don't want to shoot unless you can kill (or you're protected in a city/encampment).
-- But that all changes once you get the Guerilla and Elusive promotions...

UPDATE Units SET Combat = 5, 	Range = 1, 	RangedCombat = 40, 	Cost = 75,	Maintenance = 1, 	PrereqTech = 'TECH_CURRENCY'	WHERE UnitType = 'UNIT_SKIRMISHER' ;
UPDATE Units SET Combat = 30, 	Range = 1, 	RangedCombat = 65, 	Cost = 250,	Maintenance = 2, 	PrereqTech = 'TECH_RIFLING'		WHERE UnitType = 'UNIT_RANGER' ;
UPDATE Units SET Combat = 45, 	Range = 1, 	RangedCombat = 90, 	Cost = 500,	Maintenance = 4, 	PrereqTech = 'TECH_PLASTICS'	WHERE UnitType = 'UNIT_SPEC_OPS' ;


INSERT OR REPLACE INTO TypeTags (Type, Tag) VALUES ('ABILITY_STEALTH', 'CLASS_RECON');
-- Remove "Hidable" tag from recon units (otherwise they lose stealth when walking out of trees)
DELETE FROM TypeTags WHERE Type IN (SELECT UnitType FROM Units WHERE PromotionClass = 'PROMOTION_CLASS_RECON') AND Tag = 'DB_CLASS_HIDABLE' ;

DELETE FROM UnitPromotions WHERE PromotionClass = 'PROMOTION_CLASS_RECON' AND UnitPromotionType NOT IN ('PROMOTION_RANGER', 'PROMOTION_ALPINE', 'PROMOTION_GUERRILLA', 'PROMOTION_AMBUSH') ;
-- Ambush: only on attack
UPDATE Modifiers SET SubjectRequirementSetId = 'DB_REQSET_ATTACKING' WHERE ModifierId = 'AMBUSH_INCREASED_COMBAT_STRENGTH' ;
-- Move Guerrilla to level 4
UPDATE UnitPromotions SET Level = 4, Column = 3 WHERE UnitPromotionType = 'PROMOTION_GUERRILLA' ;

INSERT OR IGNORE INTO Types 
(Type,								Kind) VALUES
('DB_PROMOTION_RECON_COMMANDO',		'KIND_PROMOTION'),
('DB_PROMOTION_RECON_AMPHIBIOUS',	'KIND_PROMOTION'),
('DB_PROMOTION_RECON_EXTRA_ATTACK',	'KIND_PROMOTION'),
('DB_PROMOTION_RECON_ELUSIVE',		'KIND_PROMOTION')
;

INSERT OR IGNORE INTO UnitPromotions
(UnitPromotionType,					Level,	Column,	PromotionClass,				Name,									Description) VALUES
('DB_PROMOTION_RECON_COMMANDO',		2,		1,		'PROMOTION_CLASS_RECON',	'LOC_PROMOTION_COMMANDO_NAME',			'LOC_PROMOTION_COMMANDO_DESCRIPTION'),
('DB_PROMOTION_RECON_AMPHIBIOUS',	2,		3,		'PROMOTION_CLASS_RECON',	'LOC_PROMOTION_AMPHIBIOUS_NAME',		'LOC_DB_PROMOTION_AMPHIBIOUS_DESCRIPTION'),
('DB_PROMOTION_RECON_EXTRA_ATTACK',	3,		1,		'PROMOTION_CLASS_RECON',	'LOC_DB_PROMOTION_DOUBLE_STRIKE_NAME',	'LOC_DB_PROMOTION_DOUBLE_STRIKE_DESCRIPTION'),
('DB_PROMOTION_RECON_ELUSIVE',		4,		1,		'PROMOTION_CLASS_RECON',	'LOC_DB_PROMOTION_ELUSIVE_NAME',		'LOC_DB_PROMOTION_ELUSIVE_DESC')
;

INSERT OR IGNORE INTO UnitPromotionModifiers
(UnitPromotionType,					ModifierId) VALUES
('DB_PROMOTION_RECON_COMMANDO',		'COMMANDO_BONUS_IGNORE_CLIFF_WALLS'),
('DB_PROMOTION_RECON_COMMANDO',		'COMMANDO_BONUS_MOVEMENT'),
('DB_PROMOTION_RECON_AMPHIBIOUS',	'AMPHIBIOUS_BONUS_IGNORE_RIVERS'),
('DB_PROMOTION_RECON_AMPHIBIOUS',	'AMPHIBIOUS_BONUS_IGNORE_SHORES'),
('DB_PROMOTION_RECON_EXTRA_ATTACK',	'DB_MOD_EXTRA_ATTACK'),
('DB_PROMOTION_RECON_ELUSIVE',		'DB_MOD_IGNORE_ZOC')
;


DELETE FROM UnitPromotionPrereqs WHERE UnitPromotion IN 
	(SELECT UnitPromotionType FROM UnitPromotions WHERE PromotionClass = 'PROMOTION_CLASS_RECON') ;

INSERT INTO UnitPromotionPrereqs 
(UnitPromotion, 					PrereqUnitPromotion) VALUES
('DB_PROMOTION_RECON_COMMANDO', 	'PROMOTION_RANGER'),
('DB_PROMOTION_RECON_COMMANDO', 	'PROMOTION_ALPINE'),
('DB_PROMOTION_RECON_AMPHIBIOUS', 	'PROMOTION_RANGER'),
('DB_PROMOTION_RECON_AMPHIBIOUS', 	'PROMOTION_ALPINE'),
('DB_PROMOTION_RECON_EXTRA_ATTACK', 'DB_PROMOTION_RECON_COMMANDO'),
('DB_PROMOTION_RECON_EXTRA_ATTACK', 'DB_PROMOTION_RECON_AMPHIBIOUS'),
('PROMOTION_AMBUSH', 				'DB_PROMOTION_RECON_COMMANDO'),
('PROMOTION_AMBUSH', 				'DB_PROMOTION_RECON_AMPHIBIOUS'),
('DB_PROMOTION_RECON_ELUSIVE', 		'DB_PROMOTION_RECON_EXTRA_ATTACK'),
('DB_PROMOTION_RECON_ELUSIVE', 		'PROMOTION_AMBUSH'),
('PROMOTION_GUERRILLA', 			'DB_PROMOTION_RECON_EXTRA_ATTACK'),
('PROMOTION_GUERRILLA', 			'PROMOTION_AMBUSH')
;